<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= recipe.name %></title>
</head>
<body>
    <%- include('../partials/_navbar.ejs') %>
    <h1><%= recipe.name %> by <%= recipe.owner.username %></h1>
    
    <div class="ingredients">
        <h2>Ingredients:</h2>
        <ul>
            <% if (recipe.ingredients.length === 0) { %>
                <li>No ingredients listed.</li>
            <% } else { %>
                <% recipe.ingredients.forEach(ingredientId => { %>
                    <% const ingredient = ingredients.find(ing => ing._id.equals(ingredientId)); %>
                    <% if (ingredient) { %>
                        <li><%= ingredient.name %></li>
                    <% } %>
                <% }); %>
            <% } %>
        </ul>
    </div>
    
    <div class="instructions">
        <h2>Instructions:</h2>
        <p><%= recipe.instructions || 'No instructions provided.' %></p>
    </div>
    
    <div class="actions">
        <a href="/recipes/<%= recipe._id %>/edit">Edit Recipe</a>
        <a href="/recipes">Back to Recipes</a>
    </div>
</body>
</html>